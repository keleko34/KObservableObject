var KObservableObject=function(){var u=function(){return function(u,v,A){function m(a,c,b,f,d,h,k){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=h;this.type=b;this.listener=k;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=f;this.oldValue=d}function n(a,c,b,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=c;this.event=b;this.args=f}function w(a,c){var b=q[c];return function(c,d){var h=new m(this,p(b)?c:"",a,p(b)?this[c]:"",p(b)?this[c]:"",arguments),h=new n(a,p(b)?c:"",h,arguments),k;!0!==l(h)&&(p(b)?(void 0===b[h.key]&&(b[h.key]=[]),k=b[h.key],k.push(h.args[1])):x(b)&&(void 0===b["*"]&&(b["*"]=[]),k=h.args[1]&&"*"===h.args[1]?b["*"]:b,k.push(h.args[0])));return this}}function y(a,c){var b=q[c];return function(c,d){var h=new m(this,c,a,this[c],
this[c],arguments),h=new n(a,c,h,arguments),k;if(!0!==l(h))if(p(b)){if(k=b[h.key])for(var e=0,g=k.length;e<g;e++)if(k[e].toString()===h.args[1].toString()){k.splice(e,1);break}}else if(x(b))for(void 0===b["*"]&&(b["*"]=[]),k=h.args[1]&&"*"===h.args[1]?b["*"]:b,e=0,g=k.length;e<g;e++)if(k[e].toString()===h.args[0].toString()){k.splice(e,1);break}return this}}function p(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function x(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function B(a,c,b){return{get:function(){return a[c]},set:function(b){a[c]=b},enumerable:b.enumerable,configurable:b.configurable}}function d(a,c,b){return{value:a,writable:!!c,enumerable:!1,configurable:!!b}}function z(a,c){var b=a,f=a,d=function(a,c){f=b;b=a;c.listener="__kbupdatelisteners";c.type="update";r(c)};return{get:function(){return b},set:function(a,e){var g=new m(this,c,"set",a,b,arguments,"__kblisteners");e?d(a,g):!0!==r(g)&&(d(a,g),this.callSubscribers(c,b,f))},configurable:!0,
enumerable:!0}}var q={},e={},t={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],subscribe:[],unsubscribe:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},l=function(a){for(var c=0,b=t[a.type],f=b.length;c!==f&&(b[c](a),!a._stopPropogration);c++);return a._preventDefault},g=function(a,c){if(!c._stopPropogration&&a)for(var b=0,f=a.length;b!==
f&&(a[b](c),!c._stopPropogration);b++);},r=function(a){var c=a.local[a.listener];p(c)?(g(c[a.key],a),"__kblisteners"===a.listener?(g(c["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",g(a.local[a.listener][a.key],a),g(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(g(c["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",g(a.local[a.listener][a.key],a),g(a.local[a.listener]["*"],a))):x(c)&&(g(c,a),g(c["*"],a));return a._preventDefault};
Object.defineProperties(q,{__kbname:d(u||"",!0,!0),__kbref:d(v?v.__kbref||v:q,!0,!0),__kbscopeString:d(A||"",!0,!0),__kbImmediateParent:d(v||null,!0,!0),add:d(function(a,c){var b=new m(this,a,"add",c,void 0,arguments,"__kbdatacreatelisteners"),f=new n("add",a,b,arguments);!0!==l(f)&&(void 0===this[f.key]?!0!==r(b)&&(Object.defineProperty(this,f.key,z.call(this,f.args[1],f.key)),f.type="postadd",l(f)):console.error("Your attempting to add the property: ",f.key," that already exists on",this,"try using set or direct set instead"));
return this}),addPointer:d(function(a,c,b){var f=new m(this,b||c,"add",a[c],void 0,arguments,"__kbdatacreatelisteners"),d=new n("add",b||c,f,arguments);!0!==l(d)&&!0!==r(f)&&(f=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,d.key,B(a,c,f)),d.type="postadd",l(d));return this}),prototype:d(function(a,c){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(c,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:d(function(a,
c,b){var d=new m(this,a,"set",c,this[a],arguments,"__kblisteners"),e=new n("set",a,d,arguments);void 0===this[a]?this.add(e.key,e.args[1]):!0!==l(e)&&(d.key=e.key,d.value=e.args[1],!0!==r(d)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set.call(this,e.args[1],b):Object.defineProperty(this,e.key,z.call(this,e.args[1],e.key)),e.type="postset",l(e)));return this}),remove:d(function(a){var c=new m(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),
b=new n("remove",a,c,arguments);if(!0!==l(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==r(c)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",l(b))}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(c,b){if(x(b)||p(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:d(function(a,c,b){if(void 0!==
e[a])for(var d=0,g=e[a].length;d<g;d++)e[a][d](a,c,b);if(void 0!==e["*"])for(d=0,g=e["*"].length;d<g;d++)e["*"][d](a,c,b);return this}),subscribe:d(function(a,c){var b=new m(this,a,"subscribe",this[a],void 0,arguments),b=new n("subscribe",a,b,arguments);!0!==l(b)&&(void 0===e[b.key]&&(e[b.key]=[]),e[b.key].push(c));return this}),unsubscribe:d(function(a,c){var b=new m(this,a,"unsubscribe",this[a],void 0,arguments),b=new n("unsubscribe",a,b,arguments);if(!0!==l(b)&&void 0!==e[b.key]){var d=0,g=e[b.key].length;
a:for(;d<g;d++)if(e[b.key][d].toString()===c.toString()){e[b.key].splice(d,1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,c){-1!==Object.keys(t).indexOf(a)?t[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:d(function(a,c){if(-1!==Object.keys(t).indexOf(a))for(var b=0,
d=t[a],e=d.length;b!==e;b++){if(d[b].toString()===c.toString()){d.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:d(function(){},!0),onremove:d(function(){},!0),onset:d(function(){},!0),onupdate:d(function(){},!0)});Object.defineProperties(q,{addDataListener:d(w("addDataListener","__kblisteners")),removeDataListener:d(y("removeDataListener","__kblisteners")),addDataUpdateListener:d(w("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:d(y("removeDataUpdateListener",
"__kbupdatelisteners")),addDataCreateListener:d(w("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:d(y("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:d(w("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:d(y("removeDataRemoveListener","__kbdatadeletelisteners"))});return q}}();"undefined"!==typeof define&&"undefined"!==typeof require?define([],function(){return u}):"undefined"!==typeof module&&(module.exports=u);
return u}();
