var KObservableObject=function(){var t=function(){return function(t,u,A){function m(a,d,c,x,b,g,k){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=g;this.type=c;this.listener=k;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=x;this.oldValue=b}function n(a,d,c,x){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=c;this.args=x}function v(a,d){var c=l[d];return function(d,b){var g=new m(this,d,a,this[d],this[d],arguments),g=new n(a,d,g,arguments),k;!0!==h(g)&&(q(c)&&void 0===c[g.key]&&(c[g.key]=[]),k=q(c)?c[g.key]:c,k.push(g.args[1]));return this}}function w(a,d){var c=l[d];return function(d,b){var g=new m(this,d,a,this[d],this[d],arguments),g=new n(a,d,g,arguments),k;if(!0!==h(g)){void 0!==g.args[1]&&(k=q(c)?c[g.key]:c);for(var f=0,l=k.length;f<
l;f++)if(k[f].toString()===g.args[1].toString()){k.splice(f,1);break}}return this}}function q(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function y(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function B(a,d,c){return{get:function(){return a[d]},set:function(c){a[d]=c},enumerable:c.enumerable,configurable:c.configurable}}function b(a,d,c){return{value:a,writable:!!d,enumerable:!1,configurable:!!c}}function z(a,d){var c=a,b=a,e=
function(a,d){b=c;c=a;d.listener="__kbupdatelisteners";d.type="update";p(d)};return{get:function(){return c},set:function(a,f){var h=new m(this,d,"set",a,c,arguments,"__kblisteners");f?e(a,h):!0!==p(h)&&(e(a,h),this.callSubscribers(d,c,b))},configurable:!0,enumerable:!0}}var l={},f={},r={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],
removeDataRemoveListener:[]},h=function(a){for(var d=0,c=r[a.type],b=c.length;d!==b&&(c[d](a),!a._stopPropogration);d++);return a._preventDefault},p=function(a){var d=a.local[a.listener];q(d)&&(d=d[a.key]);if(y(d))for(var c=0,b=d.length;c!==b&&(d[c](a),!a._stopPropogration);c++);return a._preventDefault};Object.defineProperties(l,{__kbname:b(t||"",!0,!0),__kbref:b(u?u.__kbref||u:l,!0,!0),__kbscopeString:b(A||"",!0,!0),__kbImmediateParent:b(u||null,!0,!0),add:b(function(a,d){var c=new m(this,a,"add",
d,void 0,arguments,"__kbdatacreatelisteners"),b=new n("add",a,c,arguments);!0!==h(b)&&(void 0===this[b.key]?!0!==p(c)&&(Object.defineProperty(this,b.key,z.call(this,b.args[1],b.key)),b.type="postadd",h(b)):console.error("Your attempting to add the property: ",b.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:b(function(a,d,c){var b=new m(this,c||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),e=new n("add",c||d,b,arguments);!0!==h(e)&&!0!==
p(b)&&(b=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,B(a,d,b)),e.type="postadd",h(e));return this}),prototype:b(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,b(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:b(function(a,d,c){var b=new m(this,a,"set",d,this[a],arguments,"__kblisteners"),e=new n("set",a,b,arguments);void 0===this[a]?this.add(e.key,e.args[1]):!0!==h(e)&&(b.key=
e.key,b.value=e.args[1],!0!==p(b)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set.call(this,e.args[1],c):Object.defineProperty(this,e.key,z.call(this,e.args[1],e.key)),e.type="postset",h(e)));return this}),remove:b(function(a){var d=new m(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),c=new n("remove",a,d,arguments);if(!0!==h(c)){if(void 0===this[c.key])return console.error("Your attempting to remove the property: ",
c.key," that does not exist on ",this),this;!0!==p(d)&&(Object.defineProperty(this,c.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),c.type="postremove",h(c))}return this}),stringify:b(function(){var a=[];return JSON.stringify(this,function(d,c){if(y(c)||q(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:b(function(a,d,c){if(void 0!==f[a]){c=0;for(var b=f[a].length;c<b;c++)f[a][c](d)}return this}),subscribe:b(function(a,b){void 0===f[a]&&(f[a]=[]);f[a].push(b);return this}),
unsubscribe:b(function(a,b){if(void 0!==f[a]){var c=0,h=f[a].length;a:for(;c<h;c++)if(f[a][c].toString()===b.toString()){f[a].splice(c,1);break a}}return this}),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(function(a,b){-1!==Object.keys(r).indexOf(a)?r[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:b(function(a,
b){if(-1!==Object.keys(r).indexOf(a))for(var c=0,f=r[a],e=f.length;c!==e;c++){if(f[c].toString()===b.toString()){f.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:b(function(){},!0),onremove:b(function(){},!0),onset:b(function(){},!0),onupdate:b(function(){},!0)});Object.defineProperties(l,{addDataListener:b(v("addDataListener","__kblisteners")),removeDataListener:b(w("removeDataListener","__kblisteners")),addDataUpdateListener:b(v("addDataUpdateListener",
"__kbupdatelisteners")),removeDataUpdateListener:b(w("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:b(v("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:b(w("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:b(v("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:b(w("removeDataRemoveListener","__kbdatadeletelisteners"))});return l}}();"undefined"!==typeof define&&"undefined"!==typeof require?
define([],function(){return t}):"undefined"!==typeof module&&(module.exports=t);return t}();
