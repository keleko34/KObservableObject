var KObservableObject=function(){var t=function(){return function(t,u,A){function m(a,d,b,x,c,g,k){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=g;this.type=b;this.listener=k;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=x;this.oldValue=c}function n(a,d,b,x){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=x}function v(a,d){var b=l[d];return function(d,c){var g=new m(this,d,a,this[d],this[d],arguments),g=new n(a,d,g,arguments),k;!0!==h(g)&&(q(b)&&void 0===b[g.key]&&(b[g.key]=[]),k=q(b)?b[g.key]:b,k.push(g.args[1]));return this}}function w(a,d){var b=l[d];return function(d,c){var g=new m(this,d,a,this[d],this[d],arguments),g=new n(a,d,g,arguments),k;if(!0!==h(g)){void 0!==g.args[1]&&(k=q(b)?b[g.key]:b);for(var f=0,l=k.length;f<
l;f++)if(k[f].toString()===g.args[1].toString()){k.splice(f,1);break}}return this}}function q(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function y(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function B(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function z(a,d){var b=a,c=a,e=
function(a,d){c=b;b=a;d.listener="__kbupdatelisteners";d.type="update";p(d)};return{get:function(){return b},set:function(a,f){var h=new m(this,d,"set",a,b,arguments,"__kblisteners");f?e(a,h):!0!==p(h)&&(e(a,h),this.callSubscribers(d,b,c))},configurable:!0,enumerable:!0}}var l={},f={},r={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],
removeDataRemoveListener:[]},h=function(a){for(var d=0,b=r[a.type],c=b.length;d!==c&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},p=function(a){var d=a.local[a.listener];q(d)&&(d=d[a.key]);if(y(d))for(var b=0,c=d.length;b!==c&&(d[b](a),!a._stopPropogration);b++);return a._preventDefault};Object.defineProperties(l,{__kbname:c(t||"",!0,!0),__kbref:c(u?u.__kbref||u:l,!0,!0),__kbscopeString:c(A||"",!0,!0),__kbImmediateParent:c(u||null,!0,!0),add:c(function(a,d){var b=new m(this,a,"add",
d,void 0,arguments,"__kbdatacreatelisteners"),c=new n("add",a,b,arguments);!0!==h(c)&&(void 0===this[c.key]?!0!==p(b)&&(Object.defineProperty(this,c.key,z.call(this,c.args[1],c.key)),c.type="postadd",h(c)):console.error("Your attempting to add the property: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:c(function(a,d,b){var c=new m(this,b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),e=new n("add",b||d,c,arguments);!0!==h(e)&&!0!==
p(c)&&(c=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,B(a,d,c)),e.type="postadd",h(e));return this}),prototype:c(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:c(function(a,d,b){var c=new m(this,a,"set",d,this[a],arguments,"__kblisteners"),e=new n("set",a,c,arguments);void 0===this[a]?this.add(e.key,e.args[1]):!0!==h(e)&&!0!==
p(c)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set.call(this,e.args[1],b):Object.defineProperty(this,e.key,z.call(this,e.args[1],e.key)),e.type="postset",h(e));return this}),remove:c(function(a){var d=new m(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),b=new n("remove",a,d,arguments);if(!0!==h(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",
this),this;!0!==p(d)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",h(b))}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(d,b){if(y(b)||q(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==f[a]){b=0;for(var c=f[a].length;b<c;b++)f[a][b](d)}return this}),subscribe:c(function(a,d){void 0===f[a]&&(f[a]=[]);f[a].push(d);return this}),unsubscribe:c(function(a,
d){if(void 0!==f[a]){var b=0,c=f[a].length;a:for(;b<c;b++)if(f[a][b].toString()===d.toString()){f[a].splice(b,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,c){-1!==Object.keys(r).indexOf(a)?r[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,c){if(-1!==Object.keys(r).indexOf(a))for(var b=
0,f=r[a],e=f.length;b!==e;b++){if(f[b].toString()===c.toString()){f.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0)});Object.defineProperties(l,{addDataListener:c(v("addDataListener","__kblisteners")),removeDataListener:c(w("removeDataListener","__kblisteners")),addDataUpdateListener:c(v("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(w("removeDataUpdateListener",
"__kbupdatelisteners")),addDataCreateListener:c(v("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:c(w("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:c(v("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:c(w("removeDataRemoveListener","__kbdatadeletelisteners"))});return l}}();"undefined"!==typeof define&&"undefined"!==typeof require?define([],function(){return t}):"undefined"!==typeof module&&(module.exports=t);
return t}();
