var CreateKObservableObject=function(){return function(q,n,r){function g(a,b,d,t,c,e){this.stopPropogation=function(){this._stopPropogration=!0};this.local=a;this.key=b;this.arguments=e;this.type=d;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=t;this.oldValue=c}function k(a){var b=this[a];return function(a,c){b[a]=c;return this}}function l(a){var b=this[a];return function(a,c){void 0!==c&&(b=b[a]);for(var e=0,g=b.length;e<g;e++)if(b[e].toString()===
c.toString()){b.splice(e,1);break}return this}}function u(a,b,d){return{get:function(){return a[b]},set:function(d){a[b]=d},enumerable:d.enumerable,configurable:d.configurable}}function c(a,b){return{value:a,writable:!!b,enumerable:!1,configurable:!1}}function p(a,b){var d=a,c=a,e=v,g=w;return{get:function(){return d},set:function(a,f){!0!==e(this,b,"set",a,d)&&(c=d,d=a,g(this,b,"update",d,c),f||this.callSubscribers(b,d,c))},configurable:!0,enumerable:!0}}var e={},h={add:[],set:[],remove:[]},m=function(a,
b,d,c,e,f){a=new g(a,b,d,c,e,f);b=0;d=h[d];for(c=d.length;b!==c&&(d[b](a),!a._stopPropogration);b++);return a._preventDefault},f={},v=function(a,b,d,c,f){a=new g(a,b,d,c,f);e.onset(a);return a._preventDefault},w=function(a,b,d,c,f){a=new g(a,b,d,c,f);e.onupdate(a);return a._preventDefault};e.onadd=function(){};e.onremove=function(){};e.onset=function(){};e.onupdate=function(){};Object.defineProperties(e,{__kbname:c(q||"",!0),__kbref:c(n||null,!0),__kbscopeString:c(r||"",!0),__kbImmediateParent:c(n||
null,!0),add:c(function(a,b){if(void 0===this[a]){var d=new g(this,a,"add",b,void 0);e.onadd(d);!0!==d._preventDefault&&(Object.defineProperty(this,a,p.call(this,b,a)),m(this,a,"add",b,void 0,arguments))}else console.error("Your attempting to add the property: ",a," that already exists on",this,"try using set or direct set instead");return this}),addPointer:c(function(a,b){var d=new g(this,key,"add",value,void 0);e.onadd(d);!0!==d._preventDefault&&(d=Object.getOwnPropertyDescriptor(a,b),Object.defineProperty(this,
b,u(a,b,d)),m(this,b,"add",a[b],void 0,arguments));return this}),set:c(function(a,b,d){if(void 0===this[a])this.add(b,a);else{var c=this[a];void 0===Object.getOwnPropertyDescriptor(this,a).value?Object.getOwnPropertyDescriptor(this,a).set.call(this,b,d):Object.defineProperty(this,a,p.call(this,b,a));m(this,a,"set",b,c,arguments)}return this}),remove:c(function(a){if(void 0===this[a])return console.error("Your attempting to remove the property: ",a," that does not exist on ",this),this;var b=new g(this,
a,"remove",this[a],void 0);e.onremove(b);!0!==b._preventDefault&&(b=this[a],Object.defineProperty(this,a,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),m(this,index,"remove",b,void 0,arguments));return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(b,d){if("[object Array]"===Object.prototype.toString.call(d)||"object"===typeof d&&d&&"[object Object]"===String.prototype.toString.call(d)){if(-1!==a.indexOf(d))return;a.push(d)}return d})}),callSubscribers:c(function(a,
b,d){if(void 0!==f[a]){b=new g(this,a,"subscriber",b,d);d=0;for(var c=f[a].length;d<c&&(f[a][d](b),!b._stopPropogration);d++);}return this}),subscribe:c(function(a,b){void 0===f[a]&&(f[a]=[]);f[a].push(b);return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,b){-1!==Object.keys(h).indexOf(a)?h[a].push(b):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:c(function(a,b){if(-1!==Object.keys(h).indexOf(a))for(var d=0,c=h[a],e=c.length;d!==e;d++){if(c[d].toString()===b.toString()){c.splice(d,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(e,{addDataListener:c(k("__kblisteners")),removeDataListener:c(l("__kblisteners")),addDataUpdateListener:c(k("__kbupdatelisteners")),removeDataUpdateListener:c(l("__kbupdatelisteners")),addDataCreateListener:c(k("__kbdatacreatelisteners")),
removeDataCreateListener:c(l("__kbdatacreatelisteners")),addDataRemoveListener:c(k("__kbdatadeletelisteners")),removeDataRemoveListener:c(l("__kbdatadeletelisteners"))});return e}}();
