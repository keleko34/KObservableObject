(function(){var k=function(){return function(k,l,u){function g(a,c,d,v,b,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=e;this.type=d;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=v;this.oldValue=b}function n(a){var c=this[a];return function(a,b){c[a]=b;return this}}function p(a){var c=this[a];return function(a,b){void 0!==
b&&(c=c[a]);for(var m=0,e=c.length;m<e;m++)if(c[m].toString()===b.toString()){c.splice(m,1);break}return this}}function w(a,c,d){return{get:function(){return a[c]},set:function(d){a[c]=d},enumerable:d.enumerable,configurable:d.configurable}}function b(a,c,d){return{value:a,writable:!!c,enumerable:!1,configurable:!!d}}function r(a,c){var d=a,b=a,e=t,f=x;return{get:function(){return d},set:function(a,g){!0!==e(this,c,"set",a,d)&&(b=d,d=a,f(this,c,"update",d,b),g||this.callSubscribers(c,d,b))},configurable:!0,
enumerable:!0}}var f={},h={add:[],set:[],remove:[]},q=function(a,c,d,b,e,f){a=new g(a,c,d,b,e,f);c=0;d=h[d];for(b=d.length;c!==b&&(d[c](a),!a._stopPropogration);c++);return a._preventDefault},e={},t=function(a,c,d,b,e){a=new g(a,c,d,b,e);f.onset(a);return a._preventDefault},x=function(a,c,d,b,e){a=new g(a,c,d,b,e);f.onupdate(a);return a._preventDefault};Object.defineProperties(f,{__kbname:b(k||"",!0,!0),__kbref:b(l?l.__kbref||l:f,!0,!0),__kbscopeString:b(u||"",!0,!0),__kbImmediateParent:b(l||null,
!0,!0),add:b(function(a,c){if(void 0===this[a]){var d=new g(this,a,"add",c,void 0);f.onadd(d);!0!==d._preventDefault&&(Object.defineProperty(this,a,r.call(this,c,a)),q(this,a,"add",c,void 0,arguments))}else console.error("Your attempting to add the property: ",a," that already exists on",this,"try using set or direct set instead");return this}),addPointer:b(function(a,c,d){var b=new g(this,d||c,"add",a[c],void 0);f.onadd(b);!0!==b._preventDefault&&(b=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,
d||c,w(a,c,b)),q(this,d||c,"add",a[c],void 0,arguments));return this}),prototype:b(function(a,c){void 0===this[a]?Object.defineProperty(this.__proto__,a,b(c,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:b(function(a,c,b){if(void 0===this[a])this.add(c,a);else if(!0!==t(this,a,"set",c)){var e=this[a];void 0===Object.getOwnPropertyDescriptor(this,a).value?Object.getOwnPropertyDescriptor(this,a).set.call(this,c,b):Object.defineProperty(this,
a,r.call(this,c,a));q(this,a,"set",c,e,arguments)}return this}),remove:b(function(a){if(void 0===this[a])return console.error("Your attempting to remove the property: ",a," that does not exist on ",this),this;var c=new g(this,a,"remove",this[a],void 0);f.onremove(c);!0!==c._preventDefault&&(c=this[a],Object.defineProperty(this,a,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),q(this,a,"remove",c,void 0,arguments));return this}),stringify:b(function(){var a=[];return JSON.stringify(this,
function(c,b){if("[object Array]"===Object.prototype.toString.call(b)||"object"===typeof b&&b&&"[object Object]"===String.prototype.toString.call(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:b(function(a,b,d){if(void 0!==e[a]){b=new g(this,a,"subscriber",b,d);d=0;for(var f=e[a].length;d<f&&(e[a][d](b),!b._stopPropogration);d++);}return this}),subscribe:b(function(a,b){void 0===e[a]&&(e[a]=[]);e[a].push(b);return this}),unsubscribe:b(function(a,b){if(void 0!==e[a]){var d=
0,f=e[a].length;a:for(;d<f;d++)if(e[a][d].toString()===b.toString()){e[a].splice(d,1);break a}}return this}),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(function(a,b){-1!==Object.keys(h).indexOf(a)?h[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:b(function(a,b){if(-1!==Object.keys(h).indexOf(a))for(var d=
0,e=h[a],f=e.length;d!==f;d++){if(e[d].toString()===b.toString()){e.splice(d,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:b(function(){},!0),onremove:b(function(){},!0),onset:b(function(){},!0),onupdate:b(function(){},!0)});Object.defineProperties(f,{addDataListener:b(n("__kblisteners")),removeDataListener:b(p("__kblisteners")),addDataUpdateListener:b(n("__kbupdatelisteners")),removeDataUpdateListener:b(p("__kbupdatelisteners")),addDataCreateListener:b(n("__kbdatacreatelisteners")),
removeDataCreateListener:b(p("__kbdatacreatelisteners")),addDataRemoveListener:b(n("__kbdatadeletelisteners")),removeDataRemoveListener:b(p("__kbdatadeletelisteners"))});return f}}();define&&require?define([],function(){return k}):module&&(module.exports=k);return k})();
