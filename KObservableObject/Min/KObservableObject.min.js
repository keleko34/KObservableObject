var KObservableObject=function(){var w=function(){return function(w,x,C){function m(a,c,b,e,d,f,k){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=f;this.type=b;this.listener=k;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=e;this.oldValue=d}function q(a,c,b,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=c;this.event=b;this.args=e}function y(a,c){var b=t[c];return function(c,d){var f=new m(this,r(b)?c:"",a,r(b)?this[c]:"",r(b)?this[c]:"",arguments),f=new q(a,r(b)?c:"",f,arguments),k;!0!==l(f)&&(r(b)?(void 0===b[f.key]&&(b[f.key]=[]),k=b[f.key],k.push(f.args[1])):z(b)&&(void 0===b["*"]&&(b["*"]=[]),k=f.args[1]&&"*"===f.args[1]?b["*"]:b,k.push(f.args[0])));return this}}function A(a,c){var b=t[c];return function(c,d){var f=new m(this,c,a,this[c],
this[c],arguments),f=new q(a,c,f,arguments),k;if(!0!==l(f))if(r(b)){if(k=b[f.key])for(var n=0,h=k.length;n<h;n++)if(k[n].toString()===f.args[1].toString()){k.splice(n,1);break}}else if(z(b))for(void 0===b["*"]&&(b["*"]=[]),k=f.args[1]&&"*"===f.args[1]?b["*"]:b,n=0,h=k.length;n<h;n++)if(k[n].toString()===f.args[0].toString()){k.splice(n,1);break}return this}}function r(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function z(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function D(a,c,b){return{get:function(){return a[c]},set:function(b){a[c]=b},enumerable:b.enumerable,configurable:b.configurable}}function d(a,c,b){return{value:a,writable:!!c,enumerable:!1,configurable:!!b}}function B(a,c){var b=a,e=a,d=function(a,c){e=b;b=a;c.listener="__kbupdatelisteners";c.type="update";u(c)};return{get:function(){return b},set:function(a,k){var h=new m(this,c,"set",a,b,arguments,"__kblisteners");k?d(a,h):!0!==u(h)&&(d(a,h),this.callSubscribers(c,b,e))},configurable:!0,
enumerable:!0}}var t={},h={},v={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},l=function(a){for(var c=0,b=v[a.type],e=b.length;c!==e&&(b[c](a),!a._stopPropogration);c++);return a._preventDefault},p=function(a,c){if(!c._stopPropogration&&a)for(var b=0,e=a.length;b!==e&&(a[b](c),!c._stopPropogration);b++);
},u=function(a){var c=a.local[a.listener];r(c)?(p(c[a.key],a),"__kblisteners"===a.listener?(p(c["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(p(c["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",p(a.local[a.listener][a.key],a),p(a.local[a.listener]["*"],a))):z(c)&&(p(c,a),p(c["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:d(w||
"",!0,!0),__kbref:d(x?x.__kbref||x:t,!0,!0),__kbscopeString:d(C||"",!0,!0),__kbImmediateParent:d(x||null,!0,!0),add:d(function(a,c){var b=new m(this,a,"add",c,void 0,arguments,"__kbdatacreatelisteners"),e=new q("add",a,b,arguments);!0!==l(e)&&(void 0===this[e.key]?!0!==u(b)&&(Object.defineProperty(this,e.key,B.call(this,e.args[1],e.key)),e.type="postadd",l(e)):console.error("Your attempting to add the property: ",e.key," that already exists on",this,"try using set or direct set instead"));return this}),
addPointer:d(function(a,c,b){var e=new m(this,b||c,"add",a[c],void 0,arguments,"__kbdatacreatelisteners"),d=new q("add",b||c,e,arguments);!0!==l(d)&&!0!==u(e)&&(e=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,d.key,D(a,c,e)),d.type="postadd",l(d));return this}),prototype:d(function(a,c){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(c,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:d(function(a,
c,b){var d=new m(this,a,"set",c,this[a],arguments,"__kblisteners"),g=new q("set",a,d,arguments);void 0===this[a]?this.add(g.key,g.args[1]):!0!==l(g)&&(d.key=g.key,d.value=g.args[1],!0!==u(d)&&(void 0===Object.getOwnPropertyDescriptor(this,g.key).value?Object.getOwnPropertyDescriptor(this,g.key).set.call(this,g.args[1],b):Object.defineProperty(this,g.key,B.call(this,g.args[1],g.key)),g.type="postset",l(g)));return this}),remove:d(function(a){var c=new m(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),
b=new q("remove",a,c,arguments);if(!0!==l(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==u(c)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",l(b))}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(c,b){if(z(b)||r(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:d(function(a,c,b){if(void 0!==
h[a])for(var d=0,g=h[a].length;d<g;d++)h[a][d](a,c,b);return this}),subscribe:d(function(a,c){var b=new m(this,a,"subscribe",this[a],void 0,arguments),b=new q("subscribe",a,b,arguments);!0!==l(b)&&(void 0===h[b.key]&&(h[b.key]=[]),h[b.key].push(c));return this}),unsubscribe:d(function(a,c){var b=new m(this,a,"unsubscribe",this[a],void 0,arguments),b=new q("unsubscribe",a,b,arguments);if(!0!==l(b)&&void 0!==h[b.key]){var d=0,g=h[b.key].length;a:for(;d<g;d++)if(h[b.key][d].toString()===c.toString()){h[b.key].splice(d,
1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,c){-1!==Object.keys(v).indexOf(a)?v[a].push(c):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:d(function(a,c){if(-1!==Object.keys(v).indexOf(a))for(var b=0,d=v[a],g=d.length;b!==g;b++){if(d[b].toString()===c.toString()){d.splice(b,
1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:d(function(){},!0),onremove:d(function(){},!0),onset:d(function(){},!0),onupdate:d(function(){},!0)});Object.defineProperties(t,{addDataListener:d(y("addDataListener","__kblisteners")),removeDataListener:d(A("removeDataListener","__kblisteners")),addDataUpdateListener:d(y("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:d(A("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:d(y("addDataCreateListener",
"__kbdatacreatelisteners")),removeDataCreateListener:d(A("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:d(y("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:d(A("removeDataRemoveListener","__kbdatadeletelisteners"))});return t}}();"undefined"!==typeof define&&"undefined"!==typeof require?define([],function(){return w}):"undefined"!==typeof module&&(module.exports=w);return w}();
