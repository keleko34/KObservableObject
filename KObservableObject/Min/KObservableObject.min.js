var KObservableObject=function(){var v=function(){return function(v,w,C){function p(a,d,b,A,c,f,h){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=d;this.arguments=f;this.type=b;this.listener=h;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=A;this.oldValue=c}function q(a,d,b,A){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.type=a;this.key=d;this.event=b;this.args=A}function x(a,d){var b=r[d];return function(d,c){var f=new p(this,n(b)?d:"",a,n(b)?this[d]:"",n(b)?this[d]:"",arguments),f=new q(a,n(b)?d:"",f,arguments),h;!0!==k(f)&&(n(b)?(void 0===b[f.key]&&(b[f.key]=[]),h=b[f.key],h.push(f.args[1])):y(b)&&(void 0===b["*"]&&(b["*"]=[]),h=f.args[1]&&"*"===f.args[1]?b["*"]:b,h.push(f.args[0])));return this}}function z(a,d){var b=r[d];return function(d,c){var f=new p(this,d,a,this[d],
this[d],arguments),f=new q(a,d,f,arguments),h;if(!0!==k(f))if(n(b)){if(h=b[f.key])for(var l=0,g=h.length;l<g;l++)if(h[l].toString()===f.args[1].toString()){h.splice(l,1);break}}else if(y(b))for(void 0===b["*"]&&(b["*"]=[]),h=f.args[1]&&"*"===f.args[1]?b["*"]:b,l=0,g=h.length;l<g;l++)if(h[l].toString()===f.args[0].toString()){h.splice(l,1);break}return this}}function n(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function y(a){return"object"===typeof a&&!!a&&a.constructor.toString()===
Array.toString()}function D(a,d,b){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,d,b){return{value:a,writable:!!d,enumerable:!1,configurable:!!b}}function B(a,d){var b=a,c=a,e=function(a,d){c=b;b=a;d.listener="__kbupdatelisteners";d.type="update";t(d)};return{get:function(){return b},set:function(a,h){var g=new p(this,d,"set",a,b,arguments,"__kblisteners");h?e(a,g):!0!==t(g)&&(e(a,g),this.callSubscribers(d,b,c))},configurable:!0,
enumerable:!0}}var r={},g={},u={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},k=function(a){for(var d=0,b=u[a.type],c=b.length;d!==c&&(b[d](a),!a._stopPropogration);d++);return a._preventDefault},m=function(a,d){if(!d._stopPropogration&&a)for(var b=0,c=a.length;b!==c&&(a[b](d),!d._stopPropogration);b++);
},t=function(a){var d=a.local[a.listener];n(d)?(m(d[a.key],a),"__kblisteners"===a.listener?(m(d["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",m(a.local[a.listener][a.key],a),m(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(m(d["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",m(a.local[a.listener][a.key],a),m(a.local[a.listener]["*"],a))):y(d)&&(m(d,a),m(d["*"],a));return a._preventDefault};Object.defineProperties(r,{__kbname:c(v||
"",!0,!0),__kbref:c(w?w.__kbref||w:r,!0,!0),__kbscopeString:c(C||"",!0,!0),__kbImmediateParent:c(w||null,!0,!0),add:c(function(a,d){var b=new p(this,a,"add",d,void 0,arguments,"__kbdatacreatelisteners"),c=new q("add",a,b,arguments);!0!==k(c)&&(void 0===this[c.key]?!0!==t(b)&&(Object.defineProperty(this,c.key,B.call(this,c.args[1],c.key)),c.type="postadd",k(c)):console.error("Your attempting to add the property: ",c.key," that already exists on",this,"try using set or direct set instead"));return this}),
addPointer:c(function(a,d,b){var c=new p(this,b||d,"add",a[d],void 0,arguments,"__kbdatacreatelisteners"),e=new q("add",b||d,c,arguments);!0!==k(e)&&!0!==t(c)&&(c=Object.getOwnPropertyDescriptor(a,d),Object.defineProperty(this,e.key,D(a,d,c)),e.type="postadd",k(e));return this}),prototype:c(function(a,d){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:c(function(a,
d,b){var c=new p(this,a,"set",d,this[a],arguments,"__kblisteners"),e=new q("set",a,c,arguments);void 0===this[a]?this.add(e.key,e.args[1]):!0!==k(e)&&(c.key=e.key,c.value=e.args[1],!0!==t(c)&&(void 0===Object.getOwnPropertyDescriptor(this,e.key).value?Object.getOwnPropertyDescriptor(this,e.key).set.call(this,e.args[1],b):Object.defineProperty(this,e.key,B.call(this,e.args[1],e.key)),e.type="postset",k(e)));return this}),remove:c(function(a){var d=new p(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),
b=new q("remove",a,d,arguments);if(!0!==k(b)){if(void 0===this[b.key])return console.error("Your attempting to remove the property: ",b.key," that does not exist on ",this),this;!0!==t(d)&&(Object.defineProperty(this,b.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),b.type="postremove",k(b))}return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(d,b){if(y(b)||n(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),callSubscribers:c(function(a,d,b){if(void 0!==
g[a]){b=0;for(var c=g[a].length;b<c;b++)g[a][b](d)}return this}),subscribe:c(function(a,d){void 0===g[a]&&(g[a]=[]);g[a].push(d);return this}),unsubscribe:c(function(a,d){if(void 0!==g[a]){var b=0,c=g[a].length;a:for(;b<c;b++)if(g[a][b].toString()===d.toString()){g[a].splice(b,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,d){-1!==
Object.keys(u).indexOf(a)?u[a].push(d):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,d){if(-1!==Object.keys(u).indexOf(a))for(var b=0,c=u[a],e=c.length;b!==e;b++){if(c[b].toString()===d.toString()){c.splice(b,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0)});Object.defineProperties(r,{addDataListener:c(x("addDataListener",
"__kblisteners")),removeDataListener:c(z("removeDataListener","__kblisteners")),addDataUpdateListener:c(x("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(z("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:c(x("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:c(z("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:c(x("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:c(z("removeDataRemoveListener",
"__kbdatadeletelisteners"))});return r}}();"undefined"!==typeof define&&"undefined"!==typeof require?define([],function(){return v}):"undefined"!==typeof module&&(module.exports=v);return v}();
