(function(){var l=function(){return function(l,m,u){function h(a,c,d,g,b,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=c;this.arguments=e;this.type=d;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=g;this.oldValue=b}function n(a){var c=this[a];return function(a,g){c[a]=g;return this}}function p(a){var c=this[a];return function(a,g){void 0!==
g&&(c=c[a]);for(var b=0,e=c.length;b<e;b++)if(c[b].toString()===g.toString()){c.splice(b,1);break}return this}}function v(a,c,d){return{get:function(){return a[c]},set:function(d){a[c]=d},enumerable:d.enumerable,configurable:d.configurable}}function b(a,c){return{value:a,writable:!!c,enumerable:!1,configurable:!1}}function r(a,c){var d=a,b=a,e=t,f=w;return{get:function(){return d},set:function(a,h){!0!==e(this,c,"set",a,d)&&(b=d,d=a,f(this,c,"update",d,b),h||this.callSubscribers(c,d,b))},configurable:!0,
enumerable:!0}}var f={},k={add:[],set:[],remove:[]},q=function(a,c,d,b,e,f){a=new h(a,c,d,b,e,f);c=0;d=k[d];for(b=d.length;c!==b&&(d[c](a),!a._stopPropogration);c++);return a._preventDefault},e={},t=function(a,c,d,b,e){a=new h(a,c,d,b,e);f.onset(a);return a._preventDefault},w=function(a,c,d,b,e){a=new h(a,c,d,b,e);f.onupdate(a);return a._preventDefault};Object.defineProperties(f,{__kbname:b(l||"",!0),__kbref:b(m?m.__kbref||m:f,!0),__kbscopeString:b(u||"",!0),__kbImmediateParent:b(m||null,!0),add:b(function(a,
c){if(void 0===this[a]){var d=new h(this,a,"add",c,void 0);f.onadd(d);!0!==d._preventDefault&&(Object.defineProperty(this,a,r.call(this,c,a)),q(this,a,"add",c,void 0,arguments))}else console.error("Your attempting to add the property: ",a," that already exists on",this,"try using set or direct set instead");return this}),addPointer:b(function(a,c,d){var b=new h(this,d||c,"add",a[c],void 0);f.onadd(b);!0!==b._preventDefault&&(b=Object.getOwnPropertyDescriptor(a,c),Object.defineProperty(this,d||c,v(a,
c,b)),q(this,d||c,"add",a[c],void 0,arguments));return this}),set:b(function(a,c,b){if(void 0===this[a])this.add(c,a);else if(!0!==t(this,a,"set",c)){var e=this[a];void 0===Object.getOwnPropertyDescriptor(this,a).value?Object.getOwnPropertyDescriptor(this,a).set.call(this,c,b):Object.defineProperty(this,a,r.call(this,c,a));q(this,a,"set",c,e,arguments)}return this}),remove:b(function(a){if(void 0===this[a])return console.error("Your attempting to remove the property: ",a," that does not exist on ",
this),this;var c=new h(this,a,"remove",this[a],void 0);f.onremove(c);!0!==c._preventDefault&&(c=this[a],Object.defineProperty(this,a,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),q(this,a,"remove",c,void 0,arguments));return this}),stringify:b(function(){var a=[];return JSON.stringify(this,function(c,b){if("[object Array]"===Object.prototype.toString.call(b)||"object"===typeof b&&b&&"[object Object]"===String.prototype.toString.call(b)){if(-1!==a.indexOf(b))return;a.push(b)}return b})}),
callSubscribers:b(function(a,b,d){if(void 0!==e[a]){b=new h(this,a,"subscriber",b,d);d=0;for(var g=e[a].length;d<g&&(e[a][d](b),!b._stopPropogration);d++);}return this}),subscribe:b(function(a,b){void 0===e[a]&&(e[a]=[]);e[a].push(b);return this}),unsubscribe:b(function(a,b){if(void 0!==e[a]){var d=0,g=e[a].length;a:for(;d<g;d++)if(e[a][d].toString()===b.toString()){e[a].splice(d,1);break a}}return this}),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),
__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(function(a,b){-1!==Object.keys(k).indexOf(a)?k[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:b(function(a,b){if(-1!==Object.keys(k).indexOf(a))for(var d=0,e=k[a],f=e.length;d!==f;d++){if(e[d].toString()===b.toString()){e.splice(d,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:b(function(){},!0),onremove:b(function(){},
!0),onset:b(function(){},!0),onupdate:b(function(){},!0)});Object.defineProperties(f,{addDataListener:b(n("__kblisteners")),removeDataListener:b(p("__kblisteners")),addDataUpdateListener:b(n("__kbupdatelisteners")),removeDataUpdateListener:b(p("__kbupdatelisteners")),addDataCreateListener:b(n("__kbdatacreatelisteners")),removeDataCreateListener:b(p("__kbdatacreatelisteners")),addDataRemoveListener:b(n("__kbdatadeletelisteners")),removeDataRemoveListener:b(p("__kbdatadeletelisteners"))});return f}}();
define&&require?define([],function(){return l}):module&&(module.exports=l);return l})();
